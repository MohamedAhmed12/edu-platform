(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{318:function(t,e,n){t.exports=n.p+"img/210c300.svg"},319:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNi40MDMiIGhlaWdodD0iMjYuNjkyIiB2aWV3Qm94PSIwIDAgMjYuNDAzIDI2LjY5MiI+CiAgICA8ZyBpZD0iRWxsaXBzZV8xOTEiIGRhdGEtbmFtZT0iRWxsaXBzZSAxOTEiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzcwNzA3MCIgc3Ryb2tlLXdpZHRoPSIyIj4KICAgICAgICA8Y2lyY2xlIGN4PSIxMC45NyIgY3k9IjEwLjk3IiByPSIxMC45NyIgc3Ryb2tlPSJub25lIiAvPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjk3IiBjeT0iMTAuOTciIHI9IjkuOTciIGZpbGw9Im5vbmUiIC8+CiAgICA8L2c+CiAgICA8cGF0aAogICAgICAgIGlkPSJQYXRoXzI4OTYiCiAgICAgICAgZGF0YS1uYW1lPSJQYXRoIDI4OTYiCiAgICAgICAgZD0iTTE0MjYwLjAyMSw3Mjc4LjNsNy45MTEsNy45MTIiCiAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE0MjQyLjIzNyAtNzI2MC4yMjUpIgogICAgICAgIGZpbGw9Im5vbmUiCiAgICAgICAgc3Ryb2tlPSIjNzA3MDcwIgogICAgICAgIHN0cm9rZS13aWR0aD0iMiIKICAgIC8+Cjwvc3ZnPg=="},320:function(t,e,n){var content=n(348);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("c1134c42",content,!0,{sourceMap:!1})},347:function(t,e,n){"use strict";var c=n(320);n.n(c).a},348:function(t,e,n){(e=n(9)(!1)).push([t.i,".ivu-modal-content{background-color:transparent;box-shadow:0 0 0}",""]),t.exports=e},409:function(t,e,n){"use strict";n.r(e);n(60),n(23);var c={name:"card",props:["card","choosedList"],computed:{userData:function(){return"receivedInvitations"==this.choosedList?this.card.sender.data:"sentInvitation"==this.choosedList?this.card.receiver.data:this.card},username:function(){return this.userData.name&&this.userData.name.length>=18?"".concat(this.userData.name.substr(0,15),"..."):this.userData.name}},methods:{postAction:function(t){var e=this,n=this.card.actions.data.find((function(e){return e.key==t}));this.$axios.post(n.endpoint_url).then((function(t){t.data&&t.data.meta&&t.data.meta.meta&&e.$toast.success(t.data.meta.meta.message),e.$emit("action-success")})).catch((function(t){var n=t.response;422==n.status&&e.$toast.error(n.data.errors[0].detail)}))},deleteAction:function(t){var e=this,n=this.card.actions.data.find((function(e){return e.key==t}));this.$axios.get(n.endpoint_url).then((function(t){t.data&&t.data.meta&&e.$toast.success(t.data.meta.message),e.$emit("action-success")}))}}},o=n(4),r=Object(o.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.card.status?n("p",{staticClass:"mt-1 mb-1 text-accepted font-bold"},[t._v(t._s(t.card.status))]):t._e(),t._v(" "),n("img",{staticClass:"img-fluid",attrs:{src:t.userData.profile_picture,alt:"card"}}),t._v(" "),n("p",{staticClass:"mt-1 mb-1 font-bold",attrs:{title:t.userData.name}},[t._v(t._s(t.username))]),t._v(" "),"sentInvitation"==t.choosedList&&t.card.actions?[n("a",{staticClass:"btn btn-primary btn-block rounded-8 py-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.postAction("resend_invitation")}}},[t._v(t._s(t.$t("resend")))]),t._v(" "),n("a",{staticClass:"btn btn-cancel btn-block text-white rounded-8 py-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.postAction("cancel_invitation")}}},[t._v(t._s(t.$t("cancel")))])]:"receivedInvitations"==t.choosedList&&t.card.actions?[n("a",{staticClass:"btn btn-primary btn-block rounded-8 py-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.postAction("accept_invitation")}}},[t._v(t._s(t.$t("accept")))]),t._v(" "),n("a",{staticClass:"btn btn-cancel btn-block text-white rounded-8 py-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.postAction("refuse_invitation")}}},[t._v(t._s(t.$t("refuse")))])]:"students"==t.choosedList?[n("a",{staticClass:"btn btn-cancel btn-block text-white rounded-8 py-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteAction("remove_student")}}},[t._v(t._s(t.$t("remove")))])]:t._e()],2)}),[],!1,null,null,null).exports,l=(n(7),{name:"send-invitation",props:["to"],data:function(){return{email:"",user:null,loading:!1}},computed:{username:function(){return this.user.name&&this.user.name.length>=35?"".concat(this.user.name.substr(0,32),"..."):this.user.name}},methods:{searchForUser:function(){var t=this;this.email&&(this.loading=!0,this.$axios.get("invitations/search?q=".concat(this.email,"&type=").concat(this.to)).then((function(e){e=t.$formatter().deserialize(e.data),t.user=e.data[0]})).finally((function(){t.loading=!1})))},sendInvitation:function(){var t=this,e=this.user.actions.data.find((function(t){return"send_invitation"===t.key}));this.$axios.post(e.endpoint_url).then((function(e){t.user=null,t.$toast.success("the invitation has been sent successfully"),t.$emit("invitation-sent")}))}}}),d={name:"inviting-users",components:{SendInvitation:Object(o.a)(l,(function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"modal-content container pr-5 pl-5 rounded-pill"},[c("div",{staticClass:"modal-body"},[c("div",{staticClass:"col-12 mb-2"},[c("div",{staticClass:"lead text-center row"},[c("div",{staticClass:"col-12 col-sm-4 ml-auto pr-0 pl-0"},[c("img",{attrs:{src:n(318)}})]),t._v(" "),c("div",{staticClass:"col-12 col-sm-7 mr-auto align-self-center pl-0 pr-0"},[c("span",{staticClass:"font-bold"},[t._t("title")],2)])])]),t._v(" "),c("div",{staticClass:"col-12"},[c("div",{staticClass:"input-group"},[c("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("email"),"aria-describedby":"basic-addon2"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),c("div",{staticClass:"input-group-append"},[c("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[c("img",{attrs:{src:n(319)}})])])])]),t._v(" "),c("div",{staticClass:"col-12 mt-3"},[c("div",{staticClass:"input-group mb-3"},[t.user?c("div",{staticClass:"col bg-light text-center rounded-8 pt-3 pb-3 ml-auto invitation-search"},[c("img",{staticClass:"img-fluid",attrs:{src:t.user.profile_picture,alt:"user"}}),t._v(" "),c("p",{staticClass:"mt-1 mb-1 font-bold",attrs:{title:t.user.name}},[t._v(t._s(t.username))]),t._v(" "),c("a",{staticClass:"btn btn-primary btn-block rounded-8 p-0",attrs:{href:"#"},on:{click:function(e){return t.sendInvitation()}}},[t._v(t._s(t.$t("invite")))]),t._v(" "),c("a",{staticClass:"btn btn-cancel btn-block text-white rounded-8 p-0",attrs:{href:"#"},on:{click:function(e){t.user=null}}},[t._v(t._s(t.$t("cancel")))])]):c("input",{staticClass:"form-control btn-primary",attrs:{type:"submit",disabled:t.loading},domProps:{value:t.$t("search")},on:{click:function(e){return e.preventDefault(),t.searchForUser()}}})])])])])}),[],!1,null,null,null).exports,StudentCard:r},data:function(){return{currentList:[],choosedList:"sentInvitation",showSearchUserDialog:!1,tabItems:[{key:"sentInvitation",label:this.$t("sent_invitations")},{key:"receivedInvitations",label:this.$t("received_invitations")},{key:"students",label:this.$t("students_list")}]}},created:function(){this.fetchUserInvitingLists()},methods:{fetchUserInvitingLists:function(){var t=this;this.currentList=[],this.$axios.get("profile?include=studentTeacher.".concat(this.choosedList)).then((function(e){(e=t.$formatter().deserialize(e.data)).studentTeacher&&e.studentTeacher.data&&e.studentTeacher.data[t.choosedList]&&(t.currentList=e.studentTeacher.data[t.choosedList].data)}))}}},m=(n(347),{layout:"default",name:"student-teacher",components:{InvitingUsers:Object(o.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel with-nav-tabs panel-default col-lg-12 col-12 mt-5 pr-sm-0 pr-md-3"},[n("div",{staticClass:"panel-body"},[n("ul",{staticClass:"ul-tabs d-flex"},[t._l(t.tabItems,(function(e){return n("li",{key:e.key,staticClass:"d-inline",class:t.choosedList==e.key?"btn-danger":"btn-rose",on:{click:function(n){n.preventDefault(),t.choosedList=e.key,t.fetchUserInvitingLists()}}},[n("a",{attrs:{href:"#"+e.key}},[t._v(t._s(e.label))])])})),t._v(" "),n("li",{staticClass:"d-inline btn-primary",on:{click:function(e){t.showSearchUserDialog=!0}}},[n("a",{attrs:{href:"#","data-toggle":"modal"}},[t._v(t._s(t.$t("add_student")))])])],2),t._v(" "),n("div",{staticClass:"d-flex mt-3 ml-2 mr-2 subject-slider",staticStyle:{"min-height":"7.5em"}},t._l(t.currentList,(function(e,c){return n("div",{key:c,staticClass:"bg-light text-center rounded-8 mx-2 invetation"},[n("student-card",{attrs:{card:e,choosedList:t.choosedList},on:{"action-success":function(e){return t.fetchUserInvitingLists()}}})],1)})),0)]),t._v(" "),n("Modal",{attrs:{closable:!1,"footer-hide":""},model:{value:t.showSearchUserDialog,callback:function(e){t.showSearchUserDialog=e},expression:"showSearchUserDialog"}},[n("send-invitation",{attrs:{to:"student"},on:{"invitation-sent":function(e){t.showSearchUserDialog=!1,t.fetchUserInvitingLists()}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.$t("add_student")))]},proxy:!0}])})],1)],1)}),[],!1,null,null,null).exports}}),v=Object(o.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"col-9 col-sm-10 col-md-10 col-lg-12 page-content row pr-md-0"},[e("section",{staticClass:"col-12 row no-padding-sm pr-sm-0"},[e("inviting-users")],1),this._v(" "),e("section",{staticClass:"col-12 row mt-5 no-padding-sm pr-0 mt-sm-2 mt-md-2 mt-lg-5"})])}),[],!1,null,null,null);e.default=v.exports}}]);