(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{411:function(t,e,r){"use strict";r.r(e);var c={name:"nested-section",props:["subject","section"]},o=r(4),n=Object(o.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"row package-card"},[r("div",{staticClass:"col-lg-12 col-12 mobile-align"},[r("p",{staticClass:"package-name"},[t._v(t._s(t.section.title))])]),t._v(" "),r("div",{staticClass:"col-md-12 col-sm-12 col-12 btn-p"},[r("nuxt-link",{staticClass:"slash btn btn-view",attrs:{prefetch:!1,to:t.localePath({path:"/student/subject/"+t.subject.id+"/sections/"+t.section.id})}},[t._v("\n        "+t._s(t.$t("view"))+"\n      ")])],1)])])}),[],!1,null,null,null).exports,l=(r(60),{name:"resource-section",props:["resource","subject","sectionId"],data:function(){return{reportText:""}},computed:{title:function(){return this.resource.details.data.title},icon:function(){switch(this.resource.resource_slug){case"pdf":return"file-pdf";case"audio":return"volume-up";case"video":return"video";case"page":return"file-alt";case"flash":return"bolt";case"picture":return"image"}return"book-open"}},methods:{showReport:function(){var t=this;this.$Modal.confirm({onOk:function(){t.sendReport()},okText:this.$t("report"),render:function(e){return e("Input",{props:{type:"textarea",value:t.reportText,autofocus:!0,placeholder:t.$t("report-placeholder")},on:{input:function(e){t.reportText=e}}})}})},sendReport:function(){var t=this,e=this.resource.actions.data.find((function(t){return"report_resource"==t.key})),body={data:{type:"user",id:"null",attributes:{report:this.reportText}}};this.$axios.post(e.endpoint_url,body).then((function(e){t.$Message.info(e.data.meta.message)})).catch((function(e){e.response.data.errors.forEach((function(e){var r=e.detail;return t.$Message.error(r)}))}))}}}),d={props:["subject"],name:"nested-sections",components:{NestedSection:n,SectionResource:Object(o.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"subject-progress"},[r("div",{staticClass:"up"},[r("div",{staticClass:"img"},[r("i",{class:"fas fa-"+t.icon})]),t._v(" "),r("Dropdown",{attrs:{trigger:"click"},on:{"on-click":function(e){return t.showReport()}}},[r("a",[r("i",{staticClass:"fas fa-ellipsis-h"})]),t._v(" "),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[r("DropdownItem",{attrs:{name:"report"}},[t._v(t._s(t.$t("report")))])],1)],1)],1),t._v(" "),r("p",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),r("div",{staticClass:"down"},[r("nuxt-link",{staticClass:"button text-center slash btn-block mt-3 m-0",attrs:{prefetch:!1,to:t.localePath({path:"/student/subject/"+t.subject.id+"/sections/"+t.sectionId+"/resource/"+t.resource.id})}},[t._v("\n        "+t._s(t.$t("view"))+"\n      ")])],1)])])}),[],!1,null,null,null).exports},data:function(){return{nestedSections:[],resources:[]}},created:function(){this.subject.is_subscribe||this.$router.push(this.localePath("/student/subject/".concat(this.subject.id)))},beforeDestroy:function(){this.$emit("update-breadcrumb",null)},watch:{"$route.params.section":{immediate:!0,handler:function(t,e){t&&this.getSectionDetails(t)}}},methods:{getSectionDetails:function(t){var e=this;this.nestedSections=[],this.resources=[],this.$axios.get("/student/subjects/view-subject-format-subject/".concat(t)).then((function(t){var r=e.$formatter().deserialize(t.data);e.$emit("update-breadcrumb",r.title);var c=r.subjectFormatSubjects&&r.subjectFormatSubjects.data&&r.subjectFormatSubjects.data.length>0;c&&(e.nestedSections=r.subjectFormatSubjects.data);var o=r.resourceSubjectFormatSubject&&r.resourceSubjectFormatSubject.data&&r.resourceSubjectFormatSubject.data.length>0;o&&(e.resources=r.resourceSubjectFormatSubject.data),c||o||e.$Message.info("section has no data")}))}}},h=Object(o.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.nestedSections.length>0?[r("div",{staticClass:"row"},t._l(t.nestedSections,(function(section){return r("nested-section",{key:section.id,staticClass:"col-lg-3 col-md-4 col-sm-6 p-l3 width-20",attrs:{subject:t.subject,section:section}})})),1)]:t._e(),t._v(" "),t.nestedSections.length>0&&t.resources.length>0?r("hr"):t._e(),t._v(" "),t.resources.length>0&&t.$route.params.section?[r("div",{staticClass:"row"},t._l(t.resources,(function(e){return r("section-resource",{key:e.id,staticClass:"col-12 col-md-6 col-xl-4",attrs:{subject:t.subject,sectionId:t.$route.params.section,resource:e}})})),1)]:t._e()],2)}),[],!1,null,null,null);e.default=h.exports}}]);