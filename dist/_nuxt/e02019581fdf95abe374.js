(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{455:function(t,e,n){"use strict";n.r(e);n(43),n(284);var o=n(404),r={name:"DragDrop",components:{draggable:n.n(o).a},props:{question:{type:Object,default:function(){return{}}},questionNumber:{type:Number,default:function(){return 0}}},data:function(){return{questionOptions:[],answers:[],optionsData:{}}},computed:{questionData:function(){return this.question.questionData.data},questionAnswer:{get:function(){return this.questionNumber?this.$store.getters["exercies/student/answers"][this.questionNumber]:{}},set:function(t){var e=this.$store.getters["exercies/student/answers"];e[this.questionNumber]=t,this.$store.commit("exercies/student/SET_ANSWERS",e)}},questionOptionsData:{get:function(){return this.questionNumber&&this.$store.getters["exercies/student/questionOptionsData"][this.questionNumber]?this.$store.getters["exercies/student/questionOptionsData"][this.questionNumber]:(console.log("questionOptionsData",this.$store.getters["exercies/student/questionOptionsData"],this.questionNumber),{options:this.questionOptions,html:{}})},set:function(t){var e=this.$store.getters["exercies/student/questionOptionsData"];e[this.questionNumber]||(e[this.questionNumber]={}),e[this.questionNumber].html=t,e[this.questionNumber].options=this.questionOptions,this.$store.commit("exercies/student/SET_QUESTION_OPTIONS_DATA",e)}}},mounted:function(){this.answers=[],this.questionOptions=this.question.questionData.data.options;var t=this.questionNumber?this.$store.getters["exercies/student/answers"][this.questionNumber]:{};this.questionOptions;this.questionNumber&&this.$store.getters["exercies/student/questionOptionsData"][this.questionNumber]&&this.$store.getters["exercies/student/questionOptionsData"][this.questionNumber],t&&t.question_id==this.question.id&&(this.answers=t.answer,this.questionOptions=this.questionOptionsData.options,this.optionsData=this.questionOptionsData.html,this.$forceUpdate())},watch:{question:function(t){this.answers=[],this.questionOptions=this.question.questionData.data.options,this.questionAnswer&&this.questionAnswer.question_id==this.question.id&&(this.answers=this.questionAnswer.answer,this.questionOptions=this.questionOptionsData.options,this.optionsData=this.questionOptionsData.html,this.$forceUpdate())},answers:function(t){this.setAnswer()}},methods:{setAnswer:function(){var t=this.answers.map((function(t,e){return{type:"answer",id:"new_answer_".concat(e+1),attributes:{single_question_id:t.single_question_id,answer_id:t.id}}}));this.questionAnswer={answer:this.answers,question_id:this.question.id},this.$emit("setAnswer",t)},drag:function(t){t.dataTransfer.setData("text",t.target.id)},drop:function(t){var data=t.dataTransfer.getData("text"),e=t.target.parentElement.id.split("-")[1];this.answers=this.answers.filter((function(t){return t.single_question_id!=e}));var n=this.$refs[data][0].childNodes[0];this.optionsData[t.target.parentElement.id]=n.outerHTML||(new XMLSerializer).serializeToString(n),this.questionOptionsData=this.optionsData,this.answers.push({single_question_id:e,id:data.split("-")[1]}),this.$forceUpdate()},checkIfUsed:function(t){return 0==this.answers.filter((function(e){return e.id==t})).length}}},c=n(4),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"title-font"},[t._v(t._s(t.questionData.description))]),t._v(" "),n("div",{staticClass:"row"},[t._l(t.questionOptions,(function(option){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.checkIfUsed(option.id),expression:"checkIfUsed(option.id)"}],key:option.id,ref:"option-"+option.id,refInFor:!0,staticClass:"col-md-2 col-lg-2 w-50",attrs:{id:"option-"+option.id,draggable:"true"},on:{dragstart:t.drag}},[n("div",{staticClass:"drag"},[n("p",{staticClass:"btn- btn-sm text-dark pt-2 pb-2"},[t._v(t._s(option.option))])])])})),t._v(" "),n("div",{staticClass:"col-12"},[n("div",{staticClass:"col-md-12 col-sm-12 col-8 col-8"},t._l(t.questionData.questions,(function(e){return n("div",{key:e.id,staticClass:"form-group row"},[n("label",{staticClass:"col-sm-9 col-12 col-form-label bold-label col-md-8"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",viewBox:"0 0 13 13"}},[n("circle",{attrs:{id:"Ellipse_295","data-name":"Ellipse 295",cx:"6.5",cy:"6.5",r:"6.5",fill:"#2e3a73"}})]),t._v("\n            "+t._s(e.question)+"\n          ")]),t._v(" "),n("div",{staticClass:"col-sm-4"},[n("div",{staticClass:"drop"},[n("div",{staticClass:"row",attrs:{id:"drop-"+e.id},on:{drop:function(e){return e.preventDefault(),t.drop(e)},dragover:function(t){t.preventDefault()}}},[t._m(0,!0),t._v(" "),n("div",{staticStyle:{"max-width":"10px"},domProps:{innerHTML:t._s(t.optionsData["drop-"+e.id])}}),t._v(" "),t._m(1,!0)])])])])})),0)])],2)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"p-0"},[e("span",[this._v("(")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-50 p-0 text-right"},[e("span",[this._v(")")])])}],!1,null,null,null);e.default=component.exports}}]);