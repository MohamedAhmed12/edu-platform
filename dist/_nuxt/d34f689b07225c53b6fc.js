(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{441:function(t,e,r){"use strict";r.r(e);r(34),r(43);var o=r(107),n={auth:"guest",layout:"auth",data:function(){return{formatter:new o.Formatter}},created:function(){var t=this;if("facebook"===this.$route.params.provider){var data={data:{type:"user",id:"null",attributes:{token:this.$route.fullPath.split("#")[1].split("&")[0].split("=")[1],user_type:this.$route.query.userType?this.$route.query.userType:"student"}}};this.$axios.post("auth/provider/facebook",data).then((function(e){t.$auth.setStrategy("local"),t.$auth.setToken("local","Bearer "+e.data.meta.token),t.$auth.strategy._setToken("Bearer "+e.data.meta.token),t.$auth.setUser(e.data.data),t.redirectToHomePage()})).catch((function(t){console.log(t,t.response)}))}if("twitter"===this.$route.params.provider){var e=this.$route.query,r={id:null,type:"twitter",oauth_token:e.oauth_token,oauth_verifier:e.oauth_verifier,user:e.user,user_type:this.user_type};r=this.formatter.serialize(r),this.$axios.post("auth/twitter/callback",r).then((function(e){t.$toast.success(t.$t("logged in successfully")),t.$auth.setStrategy("local"),t.$auth.setToken("local","Bearer "+e.data.meta.token),t.$auth.strategy._setToken("Bearer "+e.data.meta.token),t.$auth.setUser(e.data.data),t.redirectToHomePage()})).catch((function(t){})).then((function(t){}))}},methods:{redirectToHomePage:function(){var t=this.$auth.user.attributes,e=t.type||t["user-type"];["student","student_teacher","parent"].includes(e)?(this.$toast.success(this.$t("logged in successfully")),this.$router.push("/home/".concat(e))):(this.$auth.logout(),this.$toast.error(this.$t("login_not_valid")))}}},h=r(4),component=Object(h.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null);e.default=component.exports}}]);